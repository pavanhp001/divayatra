CREATE TABLE BUILDING (
  ID INT NOT NULL AUTO_INCREMENT,
  BUILDING_NAME CHARACTER VARYING(50) NOT NULL,
  NEAR_BY_TEMPLE CHARACTER VARYING(50) NOT NULL,
  DESTANCE_FROM_TEMPLE FLOAT(4) NULL DEFAULT NULL FIRST,
  ADDRESS CHARACTER VARYING(50) NOT NULL,
  PARKING_LOT ENUM('Y','N') NULL,
  BUILDING_IMG_PATH CHARACTER VARYING(50) NULL,
  PRIMARY KEY (ID)
) COLLATE='utf8_general_ci'
ENGINE=INNODB;

CREATE TABLE ROOM (
  ID INT NOT NULL AUTO_INCREMENT,
  BUILDING_TYPE ENUM('AC','NONAC') NULL,
  PRICEPER_DAY DOUBLE NULL DEFAULT NULL,
  DAYS DOUBLE NULL DEFAULT NULL,
  ROOM_IMG_PATH CHARACTER VARYING(50) NULL,
  BUILDING_ID INT,
  CONSTRAINT FK_BUILDING FOREIGN KEY (BUILDING_ID)
  REFERENCES BUILDING(ID)
  ON DELETE CASCADE
  ON UPDATE CASCADE,
  PRIMARY KEY (ID)
) COLLATE='utf8_general_ci'
ENGINE=INNODB;


CREATE TABLE CUSTOMER
(
  ID                      INT NOT NULL AUTO_INCREMENT,
  FIRST_NAME              CHARACTER VARYING(30),
  LAST_NAME               CHARACTER VARYING(30),
  PHONE_NO                INT(20),
  ARRIVE_DATE             TIMESTAMP,
  HAVE_CAR                ENUM('Y','N') NULL,
  CAR_NO                  CHARACTER VARYING(60),
  GENDER                  ENUM('M','F') NULL,
  EMAIL                   CHARACTER VARYING(60),
  EMERGENCY_CONTACT_NO    CHARACTER VARYING(60),
  ROOM_ID INT,
  CONSTRAINT FK_ROOM FOREIGN KEY (ROOM_ID)
  REFERENCES ROOM(ID)
  ON DELETE CASCADE
  ON UPDATE CASCADE,
  CONSTRAINT CUSTOMER_PKEY PRIMARY KEY (ID)
)COLLATE='utf8_general_ci'
ENGINE=INNODB;

ALTER TABLE `customer`
	DROP COLUMN `OWNER_ID`;
	
	ALTER TABLE `customer`
	CHANGE COLUMN `PHONE_NO` `PHONE_NO` VARCHAR(20) NULL DEFAULT NULL AFTER `LAST_NAME`;


===========================================================================

CREATE TABLE BUILDING (
  ID INT NOT NULL AUTO_INCREMENT,
  BUILDING_NAME CHARACTER VARYING(50) NOT NULL,
  ADDRESS CHARACTER VARYING(50) NOT NULL,
  PARKING_LOT ENUM('Y','N') NULL,
  BUILDING_IMG_PATH CHARACTER VARYING(50) NULL,
  PRIMARY KEY (ID)
) COLLATE='utf8_general_ci'
ENGINE=INNODB;


CREATE TABLE ROOM (
  ID INT NOT NULL AUTO_INCREMENT,
  BUILDING_TYPE ENUM('AC','NONAC') NULL,
  PRICERER_MONTH DOUBLE NULL DEFAULT NULL,
  DAYS DOUBLE NULL DEFAULT NULL,
  ADDRESS varchar(50) NOT NULL,
  ROOM_IMG_PATH varchar(50) NULL,
  BUILDING_ID INT,
  CONSTRAINT FK_BUILDING FOREIGN KEY (BUILDING_ID)
  REFERENCES BUILDING(ID)
  ON DELETE CASCADE
  ON UPDATE CASCADE,
  PRIMARY KEY (ID)
) COLLATE='utf8_general_ci'
ENGINE=INNODB;


CREATE TABLE CUSTOMER
(
  ID                      INT NOT NULL AUTO_INCREMENT,
  FIRST_NAME              CHARACTER VARYING(30),
  LAST_NAME               CHARACTER VARYING(30),
  PHONE_NO                INT(20),
  ARRIVE_DATE             TIMESTAMP,
  HAVE_CAR                ENUM('Y','N') NULL,
  CAR_NO                  CHARACTER VARYING(60),
  GENDER                  ENUM('M','F') NULL,
  EMAIL                   CHARACTER VARYING(60),
  EMERGENCY_CONTACT_NO    CHARACTER VARYING(60),
  OWNER_ID                CHARACTER VARYING(60),
  ROOM_ID INT,
  CONSTRAINT FK_ROOM FOREIGN KEY (ROOM_ID)
  REFERENCES ROOM(ID)
  ON DELETE CASCADE
  ON UPDATE CASCADE,
  CONSTRAINT CUSTOMER_PKEY PRIMARY KEY (ID)
)COLLATE='utf8_general_ci'
ENGINE=INNODB;

======example==========

CREATE TABLE customer (
  id INT NOT NULL AUTO_INCREMENT,
  firstname varchar(50) NOT NULL,
  lastname varchar(50) NOT NULL,
  PRIMARY KEY (id)
) ENGINE=INNODB;
 
CREATE TABLE contact (
  id INT,
  customer_id INT,
  info varchar(50) NOT NULL,
  type varchar(50) NOT NULL,
  INDEX par_ind (customer_id),
  CONSTRAINT fk_customer FOREIGN KEY (customer_id)
  REFERENCES customer(id)
  ON DELETE CASCADE
  ON UPDATE CASCADE
) COLLATE='utf8_general_ci'
ENGINE=INNODB;

==================Insert ===================

INSERT INTO BUILDING(ID, BUILDING_NAME, ADDRESS, PARKING_LOT, BUILDING_IMG_PATH) VALUES (001, 'Kamala residency', '101 Vemulawada NearTemple', 'Y', '001/Kamala residency/IMG1');
INSERT INTO BUILDING(ID, BUILDING_NAME, ADDRESS, PARKING_LOT, BUILDING_IMG_PATH) VALUES (002, 'seetharam residency', '102 Vemulawada NearTemple', 'Y', '002/Kamala residency/IMG1');

=======alter ==========


ALTER TABLE `room`
	CHANGE COLUMN `PRICERER_MONTH` `PRICEPER_DAY` DOUBLE NULL DEFAULT NULL AFTER `BUILDING_TYPE`;

INSERT INTO ROOM(ID, BUILDING_TYPE, PRICEPER_DAY, DAYS, ROOM_IMG_PATH, BUILDING_ID ) VALUES (001, 'AC', 500, 2, '001/room/IMG1', 001);
INSERT INTO ROOM(ID, BUILDING_TYPE, PRICEPER_DAY, DAYS, ROOM_IMG_PATH, BUILDING_ID ) VALUES (002, 'AC', 500, 2, '002/room/IMG1', 001);
INSERT INTO ROOM(ID, BUILDING_TYPE, PRICEPER_DAY, DAYS, ROOM_IMG_PATH, BUILDING_ID ) VALUES (003, 'NONAC', 300, 2, '003/room/IMG1', 001);
INSERT INTO ROOM(ID, BUILDING_TYPE, PRICEPER_DAY, DAYS, ROOM_IMG_PATH, BUILDING_ID ) VALUES (004, 'NONAC', 300, 2, '004/room/IMG1', 001);
INSERT INTO ROOM(ID, BUILDING_TYPE, PRICEPER_DAY, DAYS, ROOM_IMG_PATH, BUILDING_ID ) VALUES (005, 'AC', 500, 2, '005/room/IMG1', 002);
INSERT INTO ROOM(ID, BUILDING_TYPE, PRICEPER_DAY, DAYS, ROOM_IMG_PATH, BUILDING_ID ) VALUES (006, 'AC', 500, 2, '006/room/IMG1', 002);
INSERT INTO ROOM(ID, BUILDING_TYPE, PRICEPER_DAY, DAYS, ROOM_IMG_PATH, BUILDING_ID ) VALUES (007, 'NONAC', 300, 2, '007/room/IMG1', 002);
INSERT INTO ROOM(ID, BUILDING_TYPE, PRICEPER_DAY, DAYS, ROOM_IMG_PATH, BUILDING_ID ) VALUES (008, 'NONAC', 300, 2, '008/room/IMG1', 002);

select * from room r INNER JOIN building b on  b.ID = r.building_ID and r.building_ID = 1;

================================

INSERT INTO BUILDING(ID, FIRST_NAME, LAST_NAME, PHONE_NO, ARRIVE_DATE, HAVE_CAR, CAR_NO, GENDER, EMAIL, EMERGENCY_CONTACT_NO, ROOM_ID) VALUES (100001, 'pavan', 'rajuri', 9550121002, now(), 'Y', 'ap 15 ap 0889', 'M', 'pavan.rajuri@gmail.com', 9550368123, 001);
INSERT INTO BUILDING(ID, FIRST_NAME, LAST_NAME, PHONE_NO, ARRIVE_DATE, HAVE_CAR, CAR_NO, GENDER, EMAIL, EMERGENCY_CONTACT_NO, ROOM_ID) VALUES (100002, 'sai', 'rajuri', 9550121002, now(), 'N', '', 'F', 'pavan.rajuri@gmail.com', 9550368123, 002);
INSERT INTO BUILDING(ID, FIRST_NAME, LAST_NAME, PHONE_NO, ARRIVE_DATE, HAVE_CAR, CAR_NO, GENDER, EMAIL, EMERGENCY_CONTACT_NO, ROOM_ID) VALUES (100001, 'swathi', 'rajuri', 9550121111, now(), 'Y', 'ap 15 ap 0111', 'M', 'pavan.swathi@gmail.com', 9550368111, 003);






